
@{
    ViewBag.Title = "Index - Seller";
    Layout = "~/Views/Shared/_LayoutSeller.cshtml";
}

@model B2B_SCM.Models.Custom

@section Styles
    {
    <link href="/assets/libs/flatpickr/flatpickr.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/libs/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet" type="text/css" />
    <style>
        .nav-tabs .nav-item .nav-link.active {
            color: #0080FF;
        }
    </style>
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="mt-0 header-title">Transaction Purchase Wheat - SELLER</h4>
                    <div class="row">
                        <div class="col-md-12">
                            <label class="form-label">Date</label>
                            <div class="input-group" style="width: 500px">
                                @Html.TextBoxFor(model => model.DateFrom, "{0:yyyy-MM-dd}", new { @class = "form-control", @type = "date", @id = "DateFrom" })
                                @Html.TextBoxFor(model => model.DateTo, "{0:yyyy-MM-dd}", new { @class = "form-control", @type = "date", @id = "DateTo" })
                                <button type="button" class="btn waves-effect waves-light btn-primary" onclick="load_table()">Apply</button>
                            </div>

                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover nowrap" id="table_data" style="width: 100%">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>PNO</th>
                                    <th>Date</th>
                                    <th>Trade Qty (MT)</th>
                                    <th>Unit Price / MT</th>
                                    <th>Shipment From</th>
                                    <th>Shipment To</th>
                                    <th>Origin</th>
                                    <th>Shipper</th>
                                    <th>Seller</th>
                                    <th>Remark</th>
                                    <th>Status</th>
                                    <th>Last Updated By</th>
                                    <th>Last Updated Date</th>
                                    <th>PID</th>
                                    <th>Origin_Code</th>
                                    <th>Shipper_Code</th>
                                    <th>Seller_Code</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="modal_header_edit" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static" style="border: solid">
    <div class="modal-dialog modal-full-width modal-dialog-scrollable modal-dialog-centered">
        <div class="modal-content border border-primary">
            <div class="modal-header">
                <h4 class="modal-title" id="modalEditTitle">Purchase Wheat - EDIT</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <!-- Modal Body -->
            @Html.HiddenFor(model => model.PurchaseIDE)
            <div class="modal-body">

                <div class="row">
                    <div class="col-sm-8">
                        <ul class="nav nav-tabs nav-tabs-success">
                            <li class="nav-item">
                                <a href="#tab1" data-bs-toggle="tab" aria-expanded="true" class="nav-link active" id="nav1">
                                    Trade Info
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#tab2" data-bs-toggle="tab" aria-expanded="false" class="nav-link" id="nav2">
                                    Shipping
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#tab3" data-bs-toggle="tab" aria-expanded="false" class="nav-link" id="nav3">
                                    Documents
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#tab4" data-bs-toggle="tab" aria-expanded="false" class="nav-link" id="nav4">
                                    LTC & Payment
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane show active" id="tab1">
                                <div class="accordion custom-accordion" id="custom-accordion-one">
                                    <div class="card mb-0">
                                        <div class="card-header">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT1" aria-expanded="false" aria-controls="collapseRD">
                                                    Trade Info <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT1" class="collapse show">
                                            <div class="card-body">

                                                <div class="row clearfix">
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Purchase No</label>
                                                            @Html.TextBoxFor(model => model.PurchaseNoE, new { @class = "form-control", @id = "PurchaseNoE", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Trade Qty (MT)</label>
                                                            @Html.TextBoxFor(model => model.TradeQtyE, new { @class = "form-control", @id = "TradeQtyE", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Unit Price / MT (E)</label>
                                                            @Html.TextBoxFor(model => model.UnitPriceE, new { @class = "form-control", @id = "UnitPriceE", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Curr</label>
                                                            @Html.TextBoxFor(model => model.Currency, new { @class = "form-control", @id = "Currency", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row clearfix">
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Shipment Periode (From)</label>
                                                            @Html.TextBoxFor(model => model.ShipmentFromE, new { @class = "form-control", @id = "ShipmentFromE", @readonly = "readonly", @type = "date" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Shipment Periode (To)</label>
                                                            @Html.TextBoxFor(model => model.ShipmentToE, new { @class = "form-control", @id = "ShipmentToE", @readonly = "readonly", @type = "date" })
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="row clearfix">
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Origin</label>
                                                            @Html.TextBoxFor(model => model.OriginE, new { @class = "form-control", @id = "OriginE", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Shipper</label>
                                                            @Html.TextBoxFor(model => model.ShipperE, new { @class = "form-control", @id = "ShipperE", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4" hidden>
                                                        <div class="mb-3">
                                                            <label class="form-label">Seller</label>
                                                            @Html.TextBoxFor(model => model.SellerE, new { @class = "form-control", @id = "SellerE", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row clearfix">
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Contract No</label>
                                                            @Html.TextBoxFor(model => model.ContractNo, new { @class = "form-control", @id = "ContractNo", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Contract Date</label>
                                                            @Html.TextBoxFor(model => model.ContractDateString, new { @class = "form-control", @id = "ContractDateString", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix">
                                                    <div class="col-sm-12">
                                                        <label class="form-label">Remark</label>
                                                        @Html.TextAreaFor(model => model.RemarkE, new { @class = "form-control", @id = "RemarkE", @readonly = "readonly" })
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="card mb-0">
                                            <div class="card-header" id="headingRD">
                                                <h5 class="m-0 position-relative">
                                                    <a class="custom-accordion-title text-reset d-block collapsed" data-bs-toggle="collapse" href="#collapseRD1" aria-expanded="false" aria-controls="collapseRD">
                                                        Required Document <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                    </a>
                                                </h5>
                                            </div>
                                            <div id="collapseRD1" class="collapse">
                                                <div class="card-body">

                                                </div>
                                            </div>
                                        </div>*@
                                    <div class="card mb-0">
                                        <div class="card-header">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT2" aria-expanded="false" aria-controls="collapseRD">
                                                    Contract Documents <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT2" class="collapse show">
                                            <div class="card-body">
                                                <div style="text-align: right">
                                                    <button class="btn btn-outline-primary waves-effect waves-light" type="button" id="btnUploadDoc" onclick="return OnClickUpload()">Upload</button>
                                                </div>
                                                <br />
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered nowrap" id="table_doc_contract" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Doc Type</th>
                                                                <th>Comment</th>
                                                                <th>Status</th>
                                                                <th>By</th>
                                                                <th>Date</th>
                                                                <th></th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-0">
                                        <div class="card-header">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT3" aria-expanded="false" aria-controls="collapseRD">
                                                    AWB Contract <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT3" class="collapse show">
                                            <div class="card-body">
                                                <div style="text-align: right">
                                                    <button type="button" class="btn btn-outline-primary waves-effect waves-light" onclick="OnClickNewAWB()">New AWB</button>
                                                </div>
                                                <br />
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered table-hover nowrap" id="table_awb_contract" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Awb No</th>
                                                                <th>Courir</th>
                                                                <th>Remark</th>
                                                                <th>By</th>
                                                                <th>Date</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tab2">
                                <div class="accordion custom-accordion" id="custom-accordion-one">
                                    <div class="card mb-0">
                                        <div class="card-header" id="headingFive">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT4" aria-expanded="true" aria-controls="collapse2">
                                                    Vessel Information <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT4" class="collapse show">
                                            <div class="card-body">
                                                <div class="row clearfix">
                                                    <div class="col-sm-4">
                                                        <div class="mb-3">
                                                            <label class="form-label">Vessel Name</label>
                                                            @Html.TextBoxFor(model => model.VesselName, new { @class = "form-control", @id = "VesselName", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="mb-3">
                                                            <label class="form-label">Demurage/Despatch</label>
                                                            @Html.TextBoxFor(model => model.DemDes, new { @class = "form-control", @id = "DemDes", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="mb-3">
                                                            <label class="form-label">Appointed Agent</label>
                                                            @Html.TextBoxFor(model => model.AppointAgent, new { @class = "form-control", @id = "AppointAgent", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix">
                                                    <div class="col-sm-12">
                                                        <div class="mb-12">
                                                            <label class="form-label">Vessel Detail</label>
                                                            @Html.TextAreaFor(model => model.VesselDetail, new { @class = "form-control", @rows = "10", @id = "VesselDetail", @readonly = "readonly" })
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="card mb-0">
                                        <div class="card-header" id="headingNine">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT5" aria-expanded="true">
                                                    Document Instruction <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT5" class="collapse show">
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered nowrap" id="table_doc_instruction" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Doc Type</th>
                                                                <th>Comment</th>
                                                                <th>Status</th>
                                                                <th>By</th>
                                                                <th>Date</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card mb-0">
                                        <div class="card-header" id="headingNine">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT6" aria-expanded="true" aria-controls="collapseLTC">
                                                    Shipping advice <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT6" class="collapse show">
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered table-hover nowrap" id="table_data_item" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <td rowspan="2">#</td>
                                                                <td rowspan="2">Wheat</td>
                                                                <td rowspan="2">Est. Qty</td>
                                                                <td rowspan="2">Final Qty</td>
                                                                <td rowspan="2">Final Price (MT)</td>
                                                                <td rowspan="2">Qty * Price</td>
                                                                <td colspan="4" style="text-align: center; font: bold">Loading Details</td>
                                                                <td colspan="4" style="text-align: center; font: bold">Discharge Details</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Port of Loading</td>
                                                                <td>ETA Load Port</td>
                                                                <td>ETB Load Port</td>
                                                                <td>ETD Load Port</td>
                                                                <td>Port of Discharge</td>
                                                                <td>ETA Disport</td>
                                                                <td>ETB Disport</td>
                                                                <td>ETC Disport</td>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tab3">
                                <div class="accordion custom-accordion" id="custom-accordion-one">
                                    <div class="card mb-0">
                                        <div class="card-header" id="headingNine">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT7" aria-expanded="true" aria-controls="collapse3">
                                                    General Document <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT7" class="collapse show">
                                            <div class="card-body">
                                                <div style="text-align: right">
                                                    <button class="btn btn-outline-primary waves-effect waves-light" type="button" id="btnUploadDoc" onclick="return OnClickUpload()">Upload</button>
                                                </div>
                                                <br />
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered nowrap" id="table_data_doc" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                @*<th>Doc ID</th>*@
                                                                <th>Doc Type</th>
                                                                <th>Comment</th>
                                                                <th>Status</th>
                                                                <th>Uploader</th>
                                                                <th>Upload Date</th>
                                                                <th></th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card mb-0">
                                        <div class="card-header" id="headingAWB">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT8" aria-expanded="true" aria-controls="collapseAWB">
                                                    AWB Information <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT8" class="collapse show">
                                            <div class="card-body">
                                                <div style="text-align: right">
                                                    <button type="button" class="btn btn-outline-primary waves-effect waves-light" onclick="OnClickNewAWB()">New AWB</button>
                                                </div>
                                                <br />
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered table-hover nowrap" id="table_data_awb" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Category</th>
                                                                <th>Awb No</th>
                                                                <th>Courir</th>
                                                                <th>Remark</th>
                                                                <th>By</th>
                                                                <th>Date</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tab4">
                                <div class="accordion custom-accordion" id="custom-accordion-one">
                                    <div class="card mb-0">
                                        <div class="card-header" id="headingNine">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT9" aria-expanded="true" aria-controls="collapseLTC">
                                                    LTC <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT9" class="collapse show">
                                            <div class="card-body">

                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Comm Date</label>
                                                            @Html.TextBoxFor(model => model.CommDiscDateH, new { @class = "form-control", @id = "CommDiscDateH", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Comp Date</label>
                                                            @Html.TextBoxFor(model => model.CompDiscDateH, new { @class = "form-control", @id = "CompDiscDateH", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Dem/Des</label>
                                                            @Html.TextBoxFor(model => model.StatusDesDem, new { @class = "form-control", @id = "StatusDesDem", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="mb-3">
                                                            <label class="form-label">Status</label>
                                                            @Html.TextBoxFor(model => model.StatusDesDemConfirm, new { @class = "form-control", @id = "StatusDesDemConfirm", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                </div>

                                                <div id="divDes">
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="mb-3">
                                                                <label class="form-label">Due Date</label>
                                                                @Html.TextBoxFor(model => model.LTCDueDate1, new { @class = "form-control", @id = "LTCDueDate1", @readonly = "readonly" })
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="mb-3">
                                                                <label class="form-label">Payment Due Date</label>
                                                                <div class="input-group">
                                                                    @Html.TextBoxFor(model => model.LTCPaymentDueDate1, new { @class = "form-control", @id = "LTCPaymentDueDate1", @style = "background-color: #f7f4e6; color: black" })
                                                                    <button class="btn btn-outline-primary waves-effect waves-light" type="button" onclick="OnSaveLTCPaymentDueDateConf()"><i class="fas fa-save"></i></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div id="divDem">
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="mb-3">
                                                                <label class="form-label">Due Date</label>
                                                                <div class="input-group">
                                                                    @Html.TextBoxFor(model => model.LTCDueDate2, new { @type = "text", @class = "form-control", @id = "LTCDueDate2", @style = "background-color: #f7f4e6; color: black" })
                                                                    <button class="btn btn-outline-primary waves-effect waves-light" type="button" onclick="OnSaveLTCDueDateConf()"><i class="fas fa-save"></i></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="mb-3">
                                                                <label class="form-label">Payment Due Date</label>
                                                                @Html.TextBoxFor(model => model.LTCPaymentDueDate2, new { @class = "form-control", @readonly = "readonly", @id = "LTCPaymentDueDate2" })
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-0">
                                        <div class="card-header" id="headingNine">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT10" aria-expanded="true" aria-controls="collapseLTC">
                                                    LTC Document <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT10" class="collapse show">
                                            <div class="card-body">
                                                <div style="text-align: right">
                                                    <button class="btn btn-outline-primary waves-effect waves-light" type="button" id="btnUploadDoc" onclick="return OnClickUpload()">Upload</button>
                                                </div>
                                                <br />
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered nowrap" id="table_doc_ltc" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Doc Type</th>
                                                                <th>Comment</th>
                                                                <th>Status</th>
                                                                <th>By</th>
                                                                <th>Date</th>
                                                                <th></th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-0">
                                        <div class="card-header" id="headingNine">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT11" aria-expanded="true" aria-controls="collapseLTC">
                                                    Payment <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT11" class="collapse show">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Due Date</label>
                                                            @Html.TextBoxFor(model => model.PaymentDueDate, new { @class = "form-control", @id = "PaymentDueDate", @readonly = "readonly"})
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="mb-3">
                                                            <label class="form-label">Payment Date</label>
                                                            @Html.TextBoxFor(model => model.PaymentDate, new { @class = "form-control", @id = "PaymentDate", @readonly = "readonly" })
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-0">
                                        <div class="card-header" id="headingNine">
                                            <h5 class="m-0 position-relative">
                                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseT12" aria-expanded="true" aria-controls="collapseLTC">
                                                    Payment Document <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                                </a>
                                            </h5>
                                        </div>
                                        <div id="collapseT12" class="collapse show">
                                            <div class="card-body">
                                                <div style="text-align: right">
                                                    <button class="btn btn-outline-primary waves-effect waves-light" type="button" id="btnUploadDoc" onclick="return OnClickUpload()">Upload</button>
                                                </div>
                                                <br />
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-bordered nowrap" id="table_doc_payment" style="width: 100%">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Doc Type</th>
                                                                <th>Comment</th>
                                                                <th>Status</th>
                                                                <th>By</th>
                                                                <th>Date</th>
                                                                <th></th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="col-sm-4">
                        <div class="card-header" id="headingDC">
                            <h5 class="m-0 position-relative">
                                <a class="custom-accordion-title text-reset d-block" data-bs-toggle="collapse" href="#collapseDC" aria-expanded="true" aria-controls="collapseDC">
                                    Document Controlling <i class="mdi mdi-chevron-down accordion-arrow"></i>
                                </a>
                            </h5>
                        </div>
                        <div id="collapseDC" class="collapse show">
                            <div class="card-body">
                                <div class="row clearfix">
                                    <div class="col-sm-12">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover nowrap" id="table_data_doc_controlling" style="width: 100%">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>NAME</th>
                                                        <th>ATTACHMENT_STATUS</th>
                                                        <th>STATUS</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align: right">
                    <a href="#" class="btn btn-outline-danger waves-effect waves-light" data-bs-dismiss="modal">Close</a>
                    <a href="#" class="btn btn-outline-warning waves-effect waves-light" onclick="OnRefreshModal()">Refresh</a>
                    @*<a href="#" class="btn btn-outline-primary waves-effect waves-light" onclick="OnClickUpload()">Upload Doc</a>*@
                    @*<button type="button" class="btn btn-outline-primary waves-effect waves-light" onclick="OnClickLTC()">LTC & Payment</button>*@
                </div>
            </div>
        </div>
    </div>
</div>


<div id="modal_upload_document" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-full-width modal-dialog-scrollable modal-dialog-centered">
        <div class="modal-content border border-info">
            <div class="modal-header">
                <h4 class="modal-title">Upload Document</h4>
                @*<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>*@
            </div>
            <div class="modal-body">
                @Html.HiddenFor(x => x.PurchaseIDE2)
                <div id="_partial_upload_doc">
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align: right">
                    <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelUpload()">Close</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal_conversation" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border border-danger">
            <div class="modal-header">
                <h4 class="modal-title" id="title-conversation">Coversation</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="conversation-list-card card">
                            <div class="card-body">
                                <div id="_partial_doc_chat" onload="">
                                </div>
                            </div>
                            <div class="p-3 conversation-input border-top">
                                <div class="row">
                                    <div class="col">
                                        <div>
                                            <textarea class="form-control" placeholder="Enter Message..." id="txtChat" name="txtChat" onkeypress="OnEnterSend(event)"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        <button type="submit" onclick="OnSend()" class="btn btn-primary chat-send width-md waves-effect waves-light h-auto"><span class="d-none d-sm-inline-block me-2">Send</span> <i class="mdi mdi-send"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div style="text-align: right">
                            <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelConversation()">Close</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@using (Html.BeginForm("update_demdes", "seller", FormMethod.Post))
{
    <div id="modal_update_demdes" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border border-danger modal-sm">
                <div class="modal-header">
                    <h4 class="modal-title" id="title-conversation-demdes">Update Dem Des</h4>
                </div>
                @Html.HiddenFor(x => x.PurchaseIDE3)
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-check mb-2 form-check-info">
                                <input class="form-check-input" type="radio" name="rbDemDes" id="rbDem" value="DEMURAGE">
                                <label class="form-check-label" for="rbDem">Demurage</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check mb-2 form-check-info">
                                <input class="form-check-input" type="radio" name="rbDemDes" id="rbDes" value="DESPATCH">
                                <label class="form-check-label" for="rbDes">Despatch</label>
                            </div>
                        </div>
                    </div>
                    @*<div class="row">
                            <div class="col-sm-12">
                                <div class="mb-3">
                                    <label class="form-label">Dem Rate</label>
                                    @Html.TextBoxFor(model => model.DemRate2, new { @class = "form-control", @id = "DemRate2", @type = "number", @style = "color: black" })
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="mb-3">
                                    <label class="form-label">Des Rate</label>
                                    @Html.TextBoxFor(model => model.DesRate2, new { @class = "form-control", @id = "DesRate2", @type = "number", @style = "color: black" })
                                </div>
                            </div>
                        </div>*@
                </div>
                <div class="modal-footer">
                    <div style="text-align: right">
                        <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelDEMDES()">Close</a>
                        <button type="submit" class="btn btn-outline-primary waves-effect waves-light" id="btnSubmit" onclick="return OnClickSave()">Update</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<div id="modal_history_file" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content border border-danger">
            <div class="modal-header">
                <h4 class="modal-title">History of files</h4>
            </div>
            <div class="modal-body">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered nowrap" id="table_history_doc" style="width: 100%">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>ID</th>
                                    <th>Doc Type</th>
                                    <th>Comment</th>
                                    <th>Reply</th>
                                    <th>Status</th>
                                    <th>Uploader</th>
                                    <th>Upload Date</th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align: right">
                    <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelHistoryDoc()">Close</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal_ltc" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content border border-danger">
            <div class="modal-header">
                <h4 class="modal-title">LTC & Payment</h4>
            </div>
            <div class="modal-body">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row clearfix">
                                <div class="col-sm-4">
                                    <div class="mb-3">
                                        <label class="form-label">Commence Discharge Date</label>
                                        @Html.TextBoxFor(model => model.CommDiscDate, "{0:dd/MM/yyyy}", new { @class = "form-control", @id = "CommDiscDate", @name = "CommDiscDate", @type = "text", @readonly = "readonly" })
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="mb-3">
                                        <label class="form-label">Complete Discharge Date</label>
                                        @Html.TextBoxFor(model => model.CompDiscDate, "{0:dd/MM/yyyy}", new { @class = "form-control", @id = "CompDiscDate", @name = "CompDiscDate", @type = "text", @readonly = "readonly" })
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="mb-3">
                                        <label class="form-label">Payment Due Date</label>
                                        @Html.TextBoxFor(model => model.PayDueDate, "{0:dd/MM/yyyy}", new { @class = "form-control", @id = "PayDueDate", @name = "PayDueDate", @type = "text", @readonly = "readonly" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12" style="text-align: right">
                                    <h2 id="txtStatusLTC"></h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align: right">
                    <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelLTC()">Close</a>
                    <button type="button" class="btn btn-outline-primary waves-effect waves-light" onclick="OnClickSaveLTC()">Confirm</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal_item_edit" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border border-danger">
            <div class="modal-header">
                <h4 class="modal-title">Edit Wheat</h4>
                @*<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>*@
            </div>
            <!-- Modal Body -->
            <div class="modal-body">
                @Html.HiddenFor(model => model.UID_TrxDtl)
                <div class="row">
                    <div class="col-sm-12">
                        <div class="row clearfix">
                            <div class="col-sm-3">
                                <div class="mb-3">
                                    <label class="form-label">Wheat</label>
                                    @Html.TextBoxFor(model => model.WheatCodeE, new { @class = "form-control", @id = "WheatCodeE", @name = "WheatCodeE", @readonly = "readonly" })
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="mb-3">
                                    <label class="form-label">Qty (Est)</label>
                                    @Html.TextBoxFor(model => model.WheatQtyE, new { @class = "form-control numeric", @id = "WheatQtyE", @name = "WheatQtyE", @readonly = "readonly" })
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="mb-3">
                                    <label class="form-label">Final Qty</label>
                                    @Html.TextBoxFor(model => model.FinalQty, new { @class = "form-control numeric", @id = "FinalQty", @name = "FinalQty", @readonly = "readonly" })
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="mb-3">
                                    <label class="form-label">Final Price (MT) (<span id="lblPriceMT" name="lblPriceMT"></span>)</label>
                                    @Html.TextBoxFor(model => model.FinalUnitPriceE, new { @class = "form-control", @id = "FinalUnitPriceE", @name = "FinalUnitPriceE" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align: right">
                    <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelUpdateItem()">Close</a>
                    <button type="button" class="btn btn-outline-primary waves-effect waves-light" id="btnSubmit" onclick="return OnUpdateItem()">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal_upload_awb" class="modal fade" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg modal-dialog-scrollable modal-dialog-centered">
        <div class="modal-content border border-info">
            <div class="modal-header">
                <h4 class="modal-title">Add AWB</h4>
            </div>
            @Html.HiddenFor(x => x.UID_AWB)
            @Html.HiddenFor(x => x.ModeTransaction)
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        @*<label class="form-label font-bold header-title">Account Type</label>*@
                        <label class="mb-3 d-block font-14 bold">Document Type <label style="color: red">*</label></label>
                        <div class="form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" id="radioContract" name="DocType" value="CONTRACT">&nbsp;&nbsp;CONTRACT
                            </label>
                        </div>
                        <div class="form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" id="radioGeneral" name="DocType" value="GENERAL">&nbsp;&nbsp;GENERAL
                            </label>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-4">
                        <div class="mb-3">
                            <label class="form-label">Courier</label>
                            @Html.DropDownListFor(model => model.Courier, Model.CourierList, new { @class = "form-control", @id = "Courier", @name = "Courier" })
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="mb-3">
                            <label class="form-label">AWB No</label>
                            @Html.TextBoxFor(model => model.AWB, new { @class = "form-control", @id = "AWB", @name = "AWB" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="mb-3">
                            <label class="form-label">Remark</label>
                            @Html.TextAreaFor(model => model.RemarkAWB, new { @class = "form-control", @id = "RemarkAWB", @name = "RemarkAWB" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align: right">
                    <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelAWB()">Close</a>
                    <button type="button" class="btn btn-outline-primary waves-effect waves-light" onclick="OnClickSaveAWB()">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="modal_revisied" class="modal fade block_upload_rev" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border border-danger">
            <div class="modal-header">
                <h4 class="modal-title">Revisied Document</h4>
            </div>
            <div class="modal-body">
                <div class="card-body">
                    @Html.HiddenFor(x => x.UID, new { @id = "UID", @name = "UID" })
                    @Html.HiddenFor(x => x.GUID, new { @id = "GUID", @name = "GUID" })
                    @Html.HiddenFor(x => x.DocTypeRev, new { @id = "DocTypeRev", @name = "DocTypeRev" })
                    <div class="row">
                        <div class="col-md-12">
                            <div class="mb-3">
                                <label class="form-label" id="txtNameFileRev" name="txtNameFileRev"></label>
                            </div>
                        </div>
                    </div>
                    <div class="row" id="div_contract">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label" id="lblContract">Contract No</label>
                                <input type="text" class="form-control" id="txtContractRev" name="txtContractRev" placeholder="Contract No">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label" id="lblContractDate">Contract Date</label>
                                <input type="text" class="form-control" id="txtContractDateRev" name="txtContractDateRev" placeholder="Contract Date">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="mb-3">
                                <label class="form-label">Remark</label>
                                <input type="text" class="form-control" id="txtRemarkRev" name="txtRemarkRev" placeholder="Remark ...">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="mb-3">
                                <input type="file" class="form-control" id="txtFileRev" name="txtFileRev" accept="application/pdf" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div style="text-align: right">
                    <a href="#" class="btn btn-outline-danger waves-effect waves-light" onclick="OnClickCancelRevDoc()">Close</a>
                    <button type="button" class="btn btn-outline-primary waves-effect waves-light" onclick="OnConfirmUploadDocument()">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts
{
    <script src="/assets/libs/flatpickr/flatpickr.min.js"></script>
    <script src="/assets/libs/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
    <script src="~/assets/blockUi.js"></script>

    <script>

        $("#LTCPaymentDueDate1").flatpickr({ dateFormat: "d-m-Y" });
        $("#LTCDueDate2").flatpickr({ dateFormat: "d-m-Y" });

        function OnUpdateItem() {
            var isValid = confirm('Are you sure want to submit/update the transaction?');
            if (isValid == false) {
                return isValid;
            }

            var data = {
                uid: document.getElementById('UID_TrxDtl').value,
                wheat: '-',
                port: '',
                qty: '',
                eta: '',
                etb: '',
                etc: '',
                eta2: '',
                fp: document.getElementById('FinalUnitPriceE').value,
            };
            $.ajax({
            type: 'post',
            url: '@Url.Action("update_item", "home")',
            data: data,
            success: function(result) {
                if (result.Success) {
                    Swal.fire({
                        title: result.Message,
                        text: "",
                        icon: "info",
                        confirmButtonColor: "#28bb4b",
                        confirmButtonText: "Ok"
                    });

                    load_table_modal_item(document.getElementById('PurchaseIDE').value);
                    $('#modal_item_edit').modal('hide');
                }
                else {
                    Swal.fire({
                        title: result.Message,
                        text: "",
                        icon: "error",
                        confirmButtonColor: "#28bb4b",
                        confirmButtonText: "Ok"
                    });
                }
            }
            });
            return true;
        }

        function OnClickCancelUpdateItem() {
            $('#modal_item_edit').modal('hide');
        }
    </script>

    <script>

        $("#txtContractDateRev").flatpickr({ dateFormat: "d-m-Y" });
        function load_table_awb(id) {
            var table = $('#table_data_awb').DataTable();
            table.destroy();
            $('#table_data_awb').DataTable({
            "ajax": {
                "url": '@Url.Action("load_modal_awb2", "home")?pno=' + id,
                "type": "GET",
                "datatype": "json",
                dataSrc: function(data) {
                    return $.parseJSON(data.data);
                }
            },
            "columns": [
                {
                    "data": "UID", "autoWidth": true,
                    mRender: function (data, type, row) {
                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Edit" style="cursor: pointer" onclick="OnClickEditAWB(\'' + row.UID + '\');"><i class="dripicons-document-edit"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnClickDeleteAWBConf(\'' + row.UID + '\');"><i class="dripicons-trash"></i></span></div>';
                    }
                },
                {
                    "data": "CTGRY", "autoWidth": true,
                },
                {
                    "data": "AWB", "autoWidth": true,
                },
                {
                    "data": "COURIER", "autoWidth": true,
                },
                {
                    "data": "REMARK", "autoWidth": true,
                },
                {
                    "data": "UPDBY", "autoWidth": true,
                },
                {
                    "data": "UPDDATE", "autoWidth": true,
                },
            ],
            "bLengthChange": false,
            "bFilter": false,
            "bPaginate": false,
            "bInfo": false,
            "order": [[1, "desc"]],
            });
        }

        function OnClickNewAWB() {
            $("#radioContract").prop("checked", false);
            $("#radioGeneral").prop("checked", false);

            document.getElementById('UID_AWB').value = '';
            document.getElementById('ModeTransaction').value = 'NEW';

            document.getElementById('AWB').value = '';
            document.getElementById('RemarkAWB').value = '';
            $('#modal_upload_awb').modal('show');
        }

        function OnClickCancelAWB() {
            $('#modal_upload_awb').modal('hide');
        }

        function OnClickSaveAWB() {
            var checkedradio = $('[name="DocType"]:radio:checked').val();
            if (checkedradio == null) {
                Swal.fire(
                    'Document type is mandatory',
                    '',
                    'error'
                );
                return false;
            }

            if (document.getElementById('AWB').value == '') {
                Swal.fire(
                    'AWB No is mandatory',
                    '',
                    'error'
                );
                return false;
            }


            var formData = new FormData();
            formData.append("PurchaseNo", document.getElementById('PurchaseIDE').value);
            formData.append("Courier", document.getElementById('Courier').value);
            formData.append("Awb", document.getElementById('AWB').value);
            formData.append("Remark", document.getElementById('RemarkAWB').value);
            formData.append("Uid", document.getElementById('UID_AWB').value);
            formData.append("DocType", checkedradio);

            $.ajax({
                type: 'POST',
                url: '@Url.Action("submit_awb", "seller")',
                cache: false,
                contentType: false,
                processData: false,
                data: formData,
                success: function (result) {
                    if (result.Success) {
                        Swal.fire(
                            result.Message,
                            '',
                            'info'
                        );
                    } else {
                        Swal.fire(
                            result.Message,
                            '',
                            'error'
                        );
                    }
                }
            });

            $('#modal_upload_awb').modal('hide');
            load_table_awb(document.getElementById('PurchaseIDE').value);
            load_table_awb_contract(document.getElementById('PurchaseIDE').value);
        }

        function OnClickEditAWB(uid) {
            $("#radioContract").prop("checked", false);
            $("#radioGeneral").prop("checked", false);

            var data = { id: uid };
            $.ajax({
                type: 'GET',
                url: '@Url.Action("get_detail_awb", "shipper")',
                data: data,
                success: function(result) {
                    if (result.success) {
                        document.getElementById('UID_AWB').value = uid;
                        document.getElementById('AWB').value = result.AWB;
                        document.getElementById('RemarkAWB').value = result.REMARK;
                        if (result.CTGRY == 'CONTRACT') {
                            $("#radioContract").prop("checked", true);
                        }
                        else {
                            $("#radioGeneral").prop("checked", true);
                        }

                        var $selectCourier = $("#Courier").selectize();
                        var selectizeCourier = $selectCourier[0].selectize;
                        selectizeCourier.setValue(result.COURIERCODE);
                    } else {

                    }
                }
            });
            $('#modal_upload_awb').modal('show');
        }


        function OnClickDeleteAWBConf(uid) {
            Swal.fire({
                title: 'Are you sure want to delete this?',
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: !0,
                confirmButtonColor: "#28bb4b",
                cancelButtonColor: "#f34e4e",
                confirmButtonText: "Continue"
            }).then(function (e) {
                e.value && OnClickDeleteAWB(uid)
            })
        }

        function OnSaveLTCPaymentDueDateConf() {
             Swal.fire({
                    title: 'Are you sure want to save this?',
                    text: "You won't be able to revert this!",
                    icon: "warning",
                    showCancelButton: !0,
                    confirmButtonColor: "#28bb4b",
                    cancelButtonColor: "#f34e4e",
                    confirmButtonText: "Continue"
                }).then(function (e) {
                    e.value && OnSaveLTCPaymentDueDate()
                })
        }


        function OnSaveLTCPaymentDueDate() {
            var url = '@Url.Action("update_ltc_payment_due_date", "home")';
            var data = { id: document.getElementById('PurchaseIDE').value, date: document.getElementById('LTCPaymentDueDate1').value };
              $.post(url, data, function (result) {
                  Swal.fire(
                      result.Message,
                      '',
                      'info'
                  );
            });
            return true;
        }


        function OnSaveLTCDueDateConf() {
             Swal.fire({
                    title: 'Are you sure want to save this?',
                    text: "You won't be able to revert this!",
                    icon: "warning",
                    showCancelButton: !0,
                    confirmButtonColor: "#28bb4b",
                    cancelButtonColor: "#f34e4e",
                    confirmButtonText: "Continue"
                }).then(function (e) {
                    e.value && OnSaveLTCDueDate()
                })
        }


        function OnSaveLTCDueDate() {
            var url = '@Url.Action("update_ltc_due_date", "home")';
            var data = { id: document.getElementById('PurchaseIDE').value, date: document.getElementById('LTCDueDate2').value };
              $.post(url, data, function (result) {
                  Swal.fire(
                      result.Message,
                      '',
                      'info'
                  );
            });
            return true;
        }

        function OnClickDeleteAWB(uid) {
            var url = '@Url.Action("delete_awb", "shipper")';
            var data = { id: uid };
              $.post(url, data, function (result) {
                  Swal.fire(
                      "Transaction successfully delete!",
                      '',
                      'info'
                  );

                  load_table_awb(document.getElementById('PurchaseIDE').value);
            });
            return true;
        }

        function OnClickLTC() {
            $('#modal_ltc').modal('show');
        }

        function OnClickCancelLTC() {
            $('#modal_ltc').modal('hide');
        }

        function OnClickSaveLTC() {
            var data = {
                PurchaseNo: document.getElementById('PurchaseIDE').value,
                commDate: document.getElementById('CommDiscDate').value,
                compDate: document.getElementById('CompDiscDate').value,
                dueDate: document.getElementById('PayDueDate').value
            };

            $.ajax({
                type: 'post',
                url: '@Url.Action("update_ltc", "home")',
                data: data,
                success: function(result) {
                    if (result.Success) {
                        Swal.fire({
                            title: result.Message,
                            text: "",
                            icon: "info",
                            confirmButtonColor: "#28bb4b",
                            confirmButtonText: "Ok"
                        });
                    }
                    else {
                        Swal.fire({
                            title: result.Message,
                            text: "",
                            icon: "error",
                            confirmButtonColor: "#28bb4b",
                            confirmButtonText: "Ok"
                        });
                    }
                    load_table_doc(document.getElementById("PurchaseIDE").value);
                }
            });
            $('#modal_ltc').modal('hide');
            return true;
        }

        function OnEnterSend(e) {
            if (e.keyCode === 13) {
                e.preventDefault(); // Ensure it is only this code that runs
                OnSend();
            }

        }

        function OnSend() {
            //alert(document.getElementById('UID_Chat').value);
            //alert(document.getElementById('txtChat').value);
            var data = { uid: document.getElementById('UID_Chat').value, remark: document.getElementById('txtChat').value };
            $.ajax({
                type: 'post',
                url: '@Url.Action("insert_chat", "home")',
                data: data,
                success: function(result) {
                    if (result.Success) {
                        document.getElementById('txtChat').value = '';
                        $('#_partial_doc_chat').load('@Url.Action("_partial_doc_chat", "home")?uid=' + document.getElementById('UID_Chat').value);


                        var d = $('#divChat');
                        d.scrollTop(d.prop("scrollHeight"));
                    }
                    else {
                        Swal.fire({
                            title: result.Message,
                            text: "",
                            icon: "error",
                            confirmButtonColor: "#28bb4b",
                            confirmButtonText: "Ok"
                        });
                    }
                    load_table_modal_doc(document.getElementById("PurchaseIDE").value);
                }
            });
            return true;
        }


        $("#WheatCode").selectize();
        $("#WheatPort").selectize();



        function OnClickUpdateDEMDES() {
            if (document.getElementById('DemDes').value == 'DEMURAGE') {
                $("#rbDem").prop("checked", true);
            }
            else {
                $("#rbDes").prop("checked", true);
            }
            $('#modal_update_demdes').modal('show');
        }

        function OnClickCancelDEMDES() {
            $('#modal_update_demdes').modal('hide');
        }

        function OnClickSaveDEMDES(id, dem, ) {
            var isValid = confirm('Are you sure want to submit/update the transaction?');
            if (isValid == false) {
                return isValid;
            }
        }

        function OnRefreshModal() {
            OnClickEdit(document.getElementById('PurchaseIDE').value);
        }

        function OnClickEdit(id) {
            document.getElementById('LTCDueDate1').value = null;
            document.getElementById('LTCPaymentDueDate1').value = null;
            document.getElementById('LTCDueDate2').value = null;
            document.getElementById('LTCPaymentDueDate2').value = null;
            var data = { id: id };
            $.ajax({
                type: 'GET',
                url: '@Url.Action("get_header_trx", "seller")',
                data: data,
                success: function(result) {
                    if (result.success) {

                        document.getElementById('modalEditTitle').innerHTML = 'Purchase Wheat - View (#' + result.PurchaseNo + ') - SELLER';
                        document.getElementById('PurchaseIDE').value = result.PurchaseIDE;
                        document.getElementById('PurchaseNoE').value = result.PurchaseNo;
                        document.getElementById('TradeQtyE').value = result.TradeQty_C;
                        document.getElementById('UnitPriceE').value = result.UnitPrice_C;
                        document.getElementById('ShipmentFromE').value = result.ShipmentFrom;
                        document.getElementById('ShipmentToE').value = result.ShipmentTo;
                        document.getElementById('RemarkE').value = result.Remark;
                        document.getElementById('ContractNo').value = result.ContractNo;
                        document.getElementById('ContractDateString').value = result.ContractDate;

                        document.getElementById('PurchaseIDE3').value = result.PurchaseIDE;

                        document.getElementById('OriginE').value = result.Origin_Name;
                        document.getElementById('ShipperE').value = result.Shipper_Name;
                        document.getElementById('SellerE').value = result.Seller_Name;
                        document.getElementById('Currency').value = result.Currency;

                        for (element of result.DocRequired.split(",")) {
                            $("#txtChkE" + element).prop("checked", true);
                        }

                        load_table_modal_item(id);
                        load_table_modal_doc(id);
                        load_table_awb(id);
                        GetVesselInfo(id);

                        load_table_doc_contract(result.PurchaseIDE);
                        load_table_awb_contract(result.PurchaseIDE);
                        load_table_doc_instruction(result.PurchaseIDE);
                        load_table_doc_ltc(result.PurchaseIDE);
                        load_table_doc_payment(result.PurchaseIDE);
                        load_table_doc_controlling(result.PurchaseIDE);

                        document.getElementById('CommDiscDateH').value = result.CommDiscDate;
                        document.getElementById('CompDiscDateH').value = result.CompDiscDate;
                        document.getElementById('StatusDesDem').value = result.StatusDesDem;
                        document.getElementById('StatusDesDemConfirm').value = result.StatusDesDemConfirm;

                        document.getElementById('LTCDueDate1').value = result.LTCDueDate;
                        document.getElementById('LTCPaymentDueDate1').value = result.LTCPaymentDueDate;

                        document.getElementById('LTCDueDate2').value = result.LTCDueDate;
                        document.getElementById('LTCPaymentDueDate2').value = result.LTCPaymentDueDate;

                        document.getElementById("divDem").style.display = 'none';
                        document.getElementById("divDes").style.display = 'none';

                        if (result.StatusDesDem == '') {
                            //document.getElementById("btnProcessLTC").style.display = "none";
                            document.getElementById('StatusDesDemConfirm').value = '';
                            //document.getElementById("title-ltc").innerHTML = "LTC";
                        }
                        else {
                            if (result.StatusDesDemConfirm == 'WAITING APPROVED') {
                                //document.getElementById("title-ltc").innerHTML = "LTC - NEED CONFIRM";
                                //document.getElementById("btnProcessLTC").style.display = "block";
                            }
                            else {
                                //document.getElementById("title-ltc").innerHTML = "LTC";
                                if (result.StatusDesDem == 'DES') {
                                    document.getElementById('StatusDesDem').style.color = '#f9c851';
                                    document.getElementById("divDem").style.display = 'none';
                                    document.getElementById("divDes").style.display = 'block';
                                }
                                else if (result.StatusDesDem == 'DEM') {
                                    document.getElementById('StatusDesDem').style.color = '#fd7e14';
                                    document.getElementById("divDem").style.display = 'block';
                                    document.getElementById("divDes").style.display = 'none';
                                }
                                else {
                                    document.getElementById("divDem").style.display = 'none';
                                    document.getElementById("divDes").style.display = 'none';
                                }
                                //document.getElementById("btnProcessLTC").style.display = "none";
                            }
                        }

                        //document.getElementById('FinalUnitPrice').value = result.FinalUnitPrice;
                        document.getElementById('PaymentDueDate').value = result.PaymentDueDate;
                        document.getElementById('PaymentDate').value = result.PaymentDate;

                        $('#modal_header_edit').modal('show');
                    } else {

                    }
                }
            });
        }

        function GetVesselInfo(id) {
            var data = { id: id };
            $.ajax({
                type: 'GET',
                url: '@Url.Action("get_header_vessel", "shipper")',
                data: data,
                success: function(result) {
                    if (result.success) {
                        document.getElementById('VesselName').value = result.VESSELNAME;
                        document.getElementById('VesselDetail').value = result.VESSELDETAIL;
                        document.getElementById('DemDes').value = result.RATES;
                        document.getElementById('AppointAgent').value = result.APPOINTAGENT;
                    } else {

                    }
                }
            });
        }

        $(document).ready(function () {
            load_table();

            $("input[type='search']").wrap("<form>");
            $("input[type='search']").closest("form").attr("autocomplete", "off");
        });

        function load_table() {
            var table = $('#table_data').DataTable();
            table.destroy();
            $('#table_data').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_data_index", "seller")?' + "fromDate=" + document.getElementById('DateFrom').value + "&toDate=" + document.getElementById('DateTo').value,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": true,
                        mRender: function (data, type, row) {
                            if (row.STATUS == 'ACTIVE') {
                                return '<span data-toggle="tooltip" title="Edit" style="cursor: pointer" onclick="OnClickEdit(\'' + row.PURCHASENO2 + '\');"><i class="dripicons-document-edit"></i></span>';
                            }
                            else {
                                return '';
                            }
                        }
                    },
                    {
                        "data": "PNO", "autoWidth": true,
                    },
                    {
                        "data": "DATE", "autoWidth": true,
                    },
                    {
                        "data": "TRADEQTY", "autoWidth": true,
                    },
                    {
                        "data": "UNITPRICE", "autoWidth": true,
                    },
                    {
                        "data": "SHIPMENTFROM", "autoWidth": true,
                    },
                    {
                        "data": "SHIPMENTTO", "autoWidth": true,
                    },
                    {
                        "data": "ORIGIN_NAME", "autoWidth": true,
                    },
                    {
                        "data": "SHIPPER_NAME", "autoWidth": true,
                    },
                    {
                        "data": "SELLER_NAME", "autoWidth": true,
                    },
                    {
                        "data": "REMARK", "autoWidth": true,
                    },
                    {
                        "data": "CLOSED", "autoWidth": true,
                        mRender: function (data, type, row) {
                            if (row.CLOSED == false) {
                                return '<span style="color: #60b1ff"> Open </span>';
                            }
                            else {
                                return '<span style="color: red"> Close </span>';
                            }
                        }
                    },
                    {
                        "data": "UPDBY", "autoWidth": true,
                    },
                    {
                        "data": "UPDDATE", "autoWidth": true,
                    },
                    {
                        "data": "PURCHASENO2", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "ORIGIN", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "SHIPPER", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "SELLER", "autoWidth": true, "visible": false,
                    },
                ],
                "bLengthChange": false,
                "bFilter": true,
                "order": [[1, "desc"]],
                scrollX: true,
            });
            return true;
        }


        function OnClickEditItem(id) {
            var data = { id: id };
            $.ajax({
                type: 'GET',
                url: '@Url.Action("get_item", "seller")',
                data: data,
                success: function(result) {
                    if (result.success) {
                        document.getElementById('UID_TrxDtl').value = result.UID;
                        document.getElementById('WheatCodeE').value = result.WHEATNAME;
                        document.getElementById('WheatQtyE').value = result.QTY;
                        document.getElementById('FinalQty').value = result.FINALQTY;
                        document.getElementById('FinalUnitPriceE').value = result.FINALPRICE;
                        document.getElementById('lblPriceMT').innerHTML = result.CURR;


                        $('#modal_item_edit').modal('show');
                    } else {

                    }
                }
            });
        }

        function load_table_modal_item(id) {
            var table = $('#table_data_item').DataTable();
            table.destroy();
            $('#table_data_item').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_modal_data_item", "seller")?' + "id=" + id,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": true,
                        mRender: function (data, type, row) {
                            return '<span data-toggle="tooltip" title="Edit" style="cursor: pointer" onclick="OnClickEditItem(\'' + row.UID + '\');"><i class="dripicons-document-edit"></i></span>';
                        }
                    },
                    {
                        "data": "WHEATNAME", "autoWidth": true,
                    },
                    {
                        "data": "QTY_C", "autoWidth": true,
                    },
                    {
                        "data": "FQTY_C", "autoWidth": true,
                    },
                    {
                        "data": "FINALPRICE", "autoWidth": true,
                    },
                    {
                        "data": "PRICE", "autoWidth": true,
                    },
                    {
                        "data": "LOADPORTNAME", "autoWidth": true,
                    },
                    {
                        "data": "ETALOAD", "autoWidth": true,
                    },
                    {
                        "data": "ETBLOAD", "autoWidth": true,
                    },
                    {
                        "data": "ETDLOAD", "autoWidth": true,
                    },
                    {
                        "data": "DISCPORTNAME", "autoWidth": true,
                    },
                    {
                        "data": "ETADISC", "autoWidth": true,
                    },
                    {
                        "data": "ETBDISC", "autoWidth": true,
                    },
                    {
                        "data": "ETCDISC", "autoWidth": true,
                    },
                ],
                "bLengthChange": false,
                "bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                "order": [[1, "asc"]],
            });
        }

        function load_table_modal_doc(id) {
            var table = $('#table_data_doc').DataTable();
            table.destroy();
            $('#table_data_doc').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_modal_data_doc", "seller")?' + "id=" + id,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": false,
                        mRender: function (data, type, row) {

                            if (row.STATUS_CODE == '1') {
                                if (row.AUTH == "1") {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                                else {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                            }
                            else if (row.STATUS_CODE == '2') {
                                //<span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-cloud-upload"></i></span> & nbsp;& nbsp;
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                            else {
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                        }
                    },
                    //{
                    //    "data": "UID", "autoWidth": true,
                    //},
                    {
                        "data": "DOCTYPE", "autoWidth": true,
                    },
                    {
                        "data": "REMARK", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_NAME", "autoWidth": true,
                        //mRender: function (data, type, row) {
                        //    if (row.STATUS_CODE == '1') {
                        //        return '<span style="color: #F4D03F"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '2') {
                        //        return '<span style="color: red"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '3') {
                        //        return '<span style="color: green"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else {
                        //        return '<span style="color: #60b1ff"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //}
                    },
                    {
                        "data": "UPLOADER", "autoWidth": true,
                    },
                    {
                        "data": "UPLOAD_DATE", "autoWidth": true,
                    },
                    {
                        "data": "DOCTYPE_ID", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_CODE", "autoWidth": true, "visible": false,
                    },
                ],
                "bLengthChange": false,
                "bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                "order": [[7, "asc"]],
                //columnDefs: [
                //    {
                //        "width": "150px", "targets": [0]
                //    }
                //]
            });
        }

        function OnClickCancelRevDoc() {
            $('#modal_revisied').modal('hide');
        }

        function OnRevisied(uid, doc_type, doc_name, guid) {
            document.getElementById('UID').value = uid;
            document.getElementById('DocTypeRev').value = doc_type;
            document.getElementById('txtNameFileRev').innerHTML = 'Old file : ' + doc_name;
            document.getElementById('GUID').value = guid;

            document.getElementById('lblContract').style.display = 'none';
            document.getElementById('lblContractDate').style.display = 'none';
            document.getElementById('txtContractRev').style.display = 'none';
            document.getElementById('txtContractDateRev').style.display = 'none';

            if (doc_type == "1") {
                var data = { id: document.getElementById('PurchaseIDE').value };
                $.ajax({
                    type: 'GET',
                    url: '@Url.Action("Get_ContractInfo", "home")',
                    data: data,
                    success: function(result) {
                        if (result.success) {
                            document.getElementById('txtContractRev').value = result.ContractNo;
                            document.getElementById('txtContractDateRev').value = result.ContractDate;

                            document.getElementById('lblContract').style.display = 'block';
                            document.getElementById('lblContractDate').style.display = 'block';
                            document.getElementById('txtContractRev').style.display = 'block';
                            document.getElementById('txtContractDateRev').style.display = 'block';
                        } else {
                            Swal.fire(
                                result.message,
                                '',
                                'error'
                            );
                        }
                    }
                });

            }

            $('#modal_revisied').modal('show');
        }

        function OnConfirmUploadDocument(id_) {
            Swal.fire({
                title: 'Are you sure want to upload this document?',
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: !0,
                confirmButtonColor: "#28bb4b",
                cancelButtonColor: "#f34e4e",
                confirmButtonText: "Continue"
            }).then(function (e) {
                e.value && OnClickUploadRev()
            })
            return true;
        }

        function OnClickUploadRev() {
            $('div.block_upload_rev').block({
                message: '<h1>Please wait ...</h1>',
                css: { border: '3px solid #a00' }
            });

            var Image = document.getElementById("txtFileRev").files[0];
            var formData = new FormData();
            formData.append("DocType", document.getElementById("DocTypeRev").value);
            formData.append("Image", Image);
            formData.append("PurchaseNo", document.getElementById("PurchaseIDE").value);
            formData.append("UID", document.getElementById("UID").value);
            formData.append("GUID", document.getElementById("GUID").value);
            try {
                formData.append("ContractInfo", document.getElementById("txtContractRev").value);
                formData.append("ContractDate", document.getElementById("txtContractDateRev").value); }
            catch {
                formData.append("ContractInfo", '');
                formData.append("ContractDate", '');
}
            $.ajax({
                type: 'POST',
                url: '@Url.Action("UploadRev", "home")',
                cache: false,
                contentType: false,
                processData: false,
                data: formData,
                success: function (result) {
                    if (result.Success) {
                        Swal.fire(
                            result.Message,
                            '',
                            'info'
                        );
                        $('div.block_upload_rev').unblock();
                        //$('#modal_upload_document').modal('hide');
                        OnRefreshModal();
                    } else {
                        Swal.fire(
                            result.Message,
                            '',
                            'error'
                        );
                        $('div.block_upload_rev').unblock();
                    }
                }
            });

            $('#modal_revisied').modal('hide');
        }

        function load_table_history_doc(type, uid, guid) {
            $('#modal_history_file').modal('show');
            var pno = document.getElementById('PurchaseIDE').value;
            var table = $('#table_history_doc').DataTable();
            table.destroy();
            $('#table_history_doc').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_modal_history_doc", "seller")?pno=' + pno + '&type=' + type + '&id=' + uid + '&guid=' + guid,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": false,
                        mRender: function (data, type, row) {
                            return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span></div>';
                        }
                    },
                    {
                        "data": "UID", "autoWidth": true,
                    },
                    {
                        "data": "DOCTYPE2", "autoWidth": true,
                    },
                    {
                        "data": "REMARK", "autoWidth": true,
                    },
                    {
                        "data": "FEEDBACK", "autoWidth": true,
                    },
                    {
                        "data": "STATUS_NAME", "autoWidth": true,
                        //mRender: function (data, type, row) {
                        //    if (row.STATUS_CODE == '1') {
                        //        return '<span style="color: #F4D03F"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '2') {
                        //        return '<span style="color: red"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '3') {
                        //        return '<span style="color: green"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else {
                        //        return '<span style="color: #60b1ff"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //}
                    },
                    {
                        "data": "UPLOADER", "autoWidth": true,
                    },
                    {
                        "data": "UPLOAD_DATE", "autoWidth": true,
                    },
                    {
                        "data": "DOCTYPE_ID", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_CODE", "autoWidth": true, "visible": false,
                    },
                ],
                "bLengthChange": false,
                "bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                "order": [[1, "desc"]],
            });
        }

        $('#modal_conversation').on('shown.bs.modal', function () {
            document.getElementById('txtChat').value = '';
            document.getElementById('txtChat').focus();
        })


        $('#modal_conversation').on('hide.bs.modal', function () {
            load_table_modal_doc(document.getElementById("PurchaseIDE").value);
        })

        function OnConversation(id, type) {
            document.getElementById('title-conversation').innerHTML = 'Conversation (' + type + ')';
            $('#_partial_doc_chat').load('@Url.Action("_partial_doc_chat", "home")?uid=' + id);
            $('#modal_conversation').modal('show');
        }

        function OnDownload(id_) {
            window.open('@Url.Action("download", "home")/' + id_, "_blank");
            @*var data = { Id: id_ };
            $.ajax({
                type: 'post',
                url: '@Url.Action("download", "seller")',
                data: data,
                success: function(result) {
                    if (!result.Success) {
                        Swal.fire({
                            title: "<span style='color:#71b6f9'>" + result.Message + "</span>",
                            text: "",
                            icon: "error",
                            confirmButtonColor: "#28bb4b",
                            confirmButtonText: "Ok"
                        });
                    }
                }
            });*@
        }

        function OnConfirmDeleteDocument(id_) {
            Swal.fire({
                title: 'Are you sure want to delete this document?',
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: !0,
                confirmButtonColor: "#28bb4b",
                cancelButtonColor: "#f34e4e",
                confirmButtonText: "Continue"
            }).then(function (e) {
                e.value && OnDeleteDocument(id_)
            })
            return true;
        }

        function OnDeleteDocument(id_) {
            var data = { Id: id_, purchaseno: document.getElementById("PurchaseIDE").value };
            $.ajax({
                type: 'post',
                url: '@Url.Action("delete_doc", "seller")',
                data: data,
                success: function(result) {
                    if (result.Success) {
                        Swal.fire({
                            title: result.Message,
                            text: "",
                            icon: "info",
                            confirmButtonColor: "#28bb4b",
                            confirmButtonText: "Ok"
                        });
                    }
                    else {
                        Swal.fire({
                            title: result.Message,
                            text: "",
                            icon: "error",
                            confirmButtonColor: "#28bb4b",
                            confirmButtonText: "Ok"
                        });
                    }
                    load_table_modal_doc(document.getElementById("PurchaseIDE").value);
                }
            });
            return true;
        }

        function OnClickUpload() {
            $('#_partial_upload_doc').load('@Url.Action("_partial_upload_doc", "home")?id=' + document.getElementById('PurchaseIDE').value);
            document.getElementById('PurchaseIDE2').value = document.getElementById('PurchaseIDE').value;
            //$('#modal_header_edit').modal('hide');
            $('#modal_upload_document').modal('show');
        }

        function OnClickCancelUpload() {
            OnRefreshModal();
            $('#modal_upload_document').modal('hide');
        }

        function OnClickCancelConversation() {
            var chat = document.getElementById('txtChat').value.trim();
            if (chat != "") {
                var isValid = confirm('Changes that you made may not be saved, leave site?');
                if (isValid == false) {
                    return isValid;
                }
            }
            $('#modal_conversation').modal('hide');
            return true;
        }

        function OnClickCancelHistoryDoc() {
            $('#modal_history_file').modal('hide');
        }

         function load_table_doc_contract(id) {
            var table = $('#table_doc_contract').DataTable();
            table.destroy();
            $('#table_doc_contract').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_modal_data_doc_contract", "home")?' + "id=" + id,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": false,
                        mRender: function (data, type, row) {
                            if (row.STATUS_CODE == '1') {
                                if (row.AUTH == "1") {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                                else {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                            }
                            else if (row.STATUS_CODE == '2') {
                                //<span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-cloud-upload"></i></span> & nbsp;& nbsp;
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                            else {
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                        }
                    },
                    {
                        "data": "DOCTYPE2", "autoWidth": true,
                    },
                    {
                        "data": "REMARK", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_NAME", "autoWidth": true,
                        //mRender: function (data, type, row) {
                        //    if (row.STATUS_CODE == '1') {
                        //        return '<span style="color: #F4D03F"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '2') {
                        //        return '<span style="color: red"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '3') {
                        //        return '<span style="color: green"> ' + row.STATUS_NAME + ' </span>';
                        //    }

                        //    else if (row.STATUS_CODE == '4') {
                        //        return '<span style="color: #60b1ff"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else {
                        //        return '<span style="color: #6a5bbc;"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //}
                    },
                    {
                        "data": "UPLOADER", "autoWidth": true,
                    },
                    {
                        "data": "UPLOAD_DATE", "autoWidth": true,
                    },
                    {
                        "data": "DOCTYPE_ID", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_CODE", "autoWidth": true, "visible": false,
                    },
                ],
                "bLengthChange": false,
                //"bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                //"order": [[7, "desc"]],
                //"dom": 'lfrtip'
            });
        }


        function load_table_awb_contract(id) {
            var table = $('#table_awb_contract').DataTable();
            table.destroy();
            $('#table_awb_contract').DataTable({
            "ajax": {
                "url": '@Url.Action("load_modal_awb_contract", "home")?pno=' + id,
                "type": "GET",
                "datatype": "json",
                dataSrc: function(data) {
                    return $.parseJSON(data.data);
                }
            },
                "columns": [
                    {
                        "data": "UID", "autoWidth": true,
                        mRender: function (data, type, row) {
                            return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Edit" style="cursor: pointer" onclick="OnClickEditAWB(\'' + row.UID + '\');"><i class="dripicons-document-edit"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnClickDeleteAWBConf(\'' + row.UID + '\');"><i class="dripicons-trash"></i></span></div>';
                        }
                    },
                {
                    "data": "AWB", "autoWidth": true,
                },
                {
                    "data": "COURIER", "autoWidth": true,
                },
                {
                    "data": "REMARK", "autoWidth": true,
                },
                {
                    "data": "UPDBY", "autoWidth": true,
                },
                {
                    "data": "UPDDATE", "autoWidth": true,
                },
            ],
            "bLengthChange": false,
            "bFilter": false,
            "bPaginate": false,
            "bInfo": false,
            "order": [[0, "desc"]],
            });
        }

        function load_table_doc_instruction(id) {
            var table = $('#table_doc_instruction').DataTable();
            table.destroy();
            $('#table_doc_instruction').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_modal_data_doc_instruction", "home")?' + "id=" + id,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": false,
                        mRender: function (data, type, row) {
                            if (row.STATUS_CODE == '1') {
                                if (row.AUTH == "1") {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                                else {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                            }
                            else if (row.STATUS_CODE == '2') {
                                //<span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-cloud-upload"></i></span> & nbsp;& nbsp;
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                            else {
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                        }
                    },
                    {
                        "data": "DOCTYPE2", "autoWidth": true,
                    },
                    {
                        "data": "REMARK", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_NAME", "autoWidth": true,
                        //mRender: function (data, type, row) {
                        //    if (row.STATUS_CODE == '1') {
                        //        return '<span style="color: #F4D03F"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '2') {
                        //        return '<span style="color: red"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '3') {
                        //        return '<span style="color: green"> ' + row.STATUS_NAME + ' </span>';
                        //    }

                        //    else if (row.STATUS_CODE == '4') {
                        //        return '<span style="color: #60b1ff"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else {
                        //        return '<span style="color: #6a5bbc;"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //}
                    },
                    {
                        "data": "UPLOADER", "autoWidth": true,
                    },
                    {
                        "data": "UPLOAD_DATE", "autoWidth": true,
                    },
                ],
                "bLengthChange": false,
                "bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                //"order": [[7, "desc"]],
                //"dom": 'lfrtip'
            });
        }

        function load_table_doc_ltc(id) {
            var table = $('#table_doc_ltc').DataTable();
            table.destroy();
            $('#table_doc_ltc').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_modal_data_doc_ltc", "home")?' + "id=" + id,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": false,
                        mRender: function (data, type, row) {
                            if (row.STATUS_CODE == '1') {
                                if (row.AUTH == "1") {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                                else {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                            }
                            else if (row.STATUS_CODE == '2') {
                                //<span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-cloud-upload"></i></span> & nbsp;& nbsp;
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                            else {
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                        }
                    },
                    {
                        "data": "DOCTYPE2", "autoWidth": true,
                    },
                    {
                        "data": "REMARK", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_NAME", "autoWidth": true,
                        //mRender: function (data, type, row) {
                        //    if (row.STATUS_CODE == '1') {
                        //        return '<span style="color: #F4D03F"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '2') {
                        //        return '<span style="color: red"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '3') {
                        //        return '<span style="color: green"> ' + row.STATUS_NAME + ' </span>';
                        //    }

                        //    else if (row.STATUS_CODE == '4') {
                        //        return '<span style="color: #60b1ff"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else {
                        //        return '<span style="color: #6a5bbc;"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //}
                    },
                    {
                        "data": "UPLOADER", "autoWidth": true,
                    },
                    {
                        "data": "UPLOAD_DATE", "autoWidth": true,
                    },
                    {
                        "data": "DOCTYPE_ID", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_CODE", "autoWidth": true, "visible": false,
                    },
                ],
                "bLengthChange": false,
                //"bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                //"order": [[7, "desc"]],
                //"dom": 'lfrtip'
            });
        }

        function load_table_doc_payment(id) {
            var table = $('#table_doc_payment').DataTable();
            table.destroy();
            $('#table_doc_payment').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_modal_data_doc_payment", "home")?' + "id=" + id,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": null, "autoWidth": false,
                        mRender: function (data, type, row) {
                            if (row.STATUS_CODE == '1') {
                                if (row.AUTH == "1") {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Delete" style="cursor: pointer" onclick="OnConfirmDeleteDocument(\'' + row.UID + '\');"><i class="dripicons-document-delete"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                                else {
                                    if (row.TOTAL_CHAT != "0") {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                    else {
                                        return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                    }
                                }
                            }
                            else if (row.STATUS_CODE == '2') {
                                //<span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-cloud-upload"></i></span> & nbsp;& nbsp;
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Upload Revised Document" style="cursor: pointer" onclick="OnRevisied(\'' + row.UID + '\',\'' + row.DOCTYPE_ID + '\',\'' + row.DOCTYPE + '\',\'' + row.GUID + '\');"><i class="dripicons-cloud-upload"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                            else {
                                if (row.TOTAL_CHAT != "0") {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span class="position-relative" data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">' + row.TOTAL_CHAT + '</span></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                                else {
                                    return '<div style="text-align: center;font-size: 20px"><span data-toggle="tooltip" title="Download" style="cursor: pointer" onclick="OnDownload(\'' + row.UID + '\');"><i class="dripicons-cloud-download"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="Conversation" style="cursor: pointer" onclick="OnConversation(\'' + row.UID + '\',\'' + row.DOCTYPE + '\');"><i class="dripicons-conversation"></i></span>&nbsp;&nbsp;<span data-toggle="tooltip" title="History Files" style="cursor: pointer" onclick="load_table_history_doc(\'' + row.DOCTYPE_ID + '\',\'' + row.UID + '\',\'' + row.GUID + '\');"><i class="dripicons-box"></i></span></div>';
                                }
                            }
                        }
                    },
                    {
                        "data": "DOCTYPE2", "autoWidth": true,
                    },
                    {
                        "data": "REMARK", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_NAME", "autoWidth": true,
                        //mRender: function (data, type, row) {
                        //    if (row.STATUS_CODE == '1') {
                        //        return '<span style="color: #F4D03F"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '2') {
                        //        return '<span style="color: red"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else if (row.STATUS_CODE == '3') {
                        //        return '<span style="color: green"> ' + row.STATUS_NAME + ' </span>';
                        //    }

                        //    else if (row.STATUS_CODE == '4') {
                        //        return '<span style="color: #60b1ff"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //    else {
                        //        return '<span style="color: #6a5bbc;"> ' + row.STATUS_NAME + ' </span>';
                        //    }
                        //}
                    },
                    {
                        "data": "UPLOADER", "autoWidth": true,
                    },
                    {
                        "data": "UPLOAD_DATE", "autoWidth": true,
                    },
                    {
                        "data": "DOCTYPE_ID", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_CODE", "autoWidth": true, "visible": false,
                    },
                ],
                "bLengthChange": false,
                //"bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                "order": [[7, "desc"]],
                "dom": 'lfrtip'
            });
        }


        function load_table_doc_controlling(id) {
            var table = $('#table_data_doc_controlling').DataTable();
            table.destroy();
            $('#table_data_doc_controlling').DataTable({
                "ajax": {
                    "url": '@Url.Action("load_table_doc_controlling", "home")?' + "id=" + id,
                    "type": "GET",
                    "datatype": "json",
                    dataSrc: function(data) {
                        return $.parseJSON(data.data);
                    }
                },
                "columns": [
                    {
                        "data": "ID", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "NAME", "autoWidth": true,
                        //mRender: function (data, type, row) {
                        //    return '<span data-toggle="tooltip" title="Edit" style="cursor: pointer" onclick="OnFilterDocHistory(\'' + row.NAME + '\',\'' + row.ID + '\');">'+row.NAME+'</span>';
                        //}
                    },
                    {
                        "data": "ATTACHMENT_STATUS", "autoWidth": true, "visible": false,
                    },
                    {
                        "data": "STATUS_DESC", "autoWidth": true,
                    mRender: function (data, type, row) {
                        if (row.ATTACHMENT_STATUS == '1') {
                            return '<span style="color: #F4D03F"> ' + row.STATUS_DESC + ' </span>';
                        }
                        else if (row.ATTACHMENT_STATUS == '2') {
                            return '<span style="color: red"> ' + row.STATUS_DESC + ' </span>';
                        }
                        else if (row.ATTACHMENT_STATUS == '3') {
                            return '<span style="color: green"> ' + row.STATUS_DESC + ' </span>';
                        }

                        else if (row.ATTACHMENT_STATUS == '4') {
                            return '<span style="color: #60b1ff"> ' + row.STATUS_DESC + ' </span>';
                        }
                        else if (row.ATTACHMENT_STATUS == '5') {
                            return '<span style="color: #13b97c"> ' + row.STATUS_DESC + ' </span>';
                        }
                        else if (row.ATTACHMENT_STATUS == '0') {
                            return '<span style="color: black"> ' + row.STATUS_DESC + ' </span>';
                        }
                        else {
                            return '<span style="color: #6a5bbc;"> ' + row.STATUS_DESC + ' </span>';
                        }
                    }
                    },
                ],
                "bLengthChange": false,
                "bFilter": false,
                "bPaginate": false,
                "bInfo": false,
                "order": [[0, "asc"]],
            });
        }

    </script>

}

